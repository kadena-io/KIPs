---
KIP: '0043'
Title: kadena_changeNetwork_v1 API
Author: Danillo Felixdaal and Bart Huijgen
Status: Draft
Type: Standard
Category: Interface
Created: 2025-02-17
---

# kadena_changeNetwork_v1 API

## Abstract

This KIP standardizes the `kadena_changeNetwork_v1` method for switching the active network within a Kadena wallet. The method updates the wallet’s configuration to the specified network and returns updated network information. This enables dApps to dynamically change networks without a full disconnect, ensuring a seamless user experience.

## Motivation

In multi-network environments, dApps may need to switch between networks (e.g., from testnet to mainnet) dynamically. A standardized method for changing the active network simplifies integration by:

- Allowing dApps to request a network change without disconnecting the current session.
- Ensuring that updated network configuration is returned in a consistent format.
- Enabling wallets to validate and update their configuration securely and efficiently.

## Specification

### Method Definition

**Method Name:** `kadena_changeNetwork_v1`

### Request Parameters

```typescript
interface ChangeNetworkRequest {
  networkId: string // Required: The unique identifier for the target network (e.g., "mainnet01", "testnet04").
}
```

### Response

The method returns a `NetworkInfo` object containing details about the newly active network:

```typescript
interface NetworkInfo {
  networkName: string // The display name of the network (e.g., "mainnet").
  networkId: string // The unique identifier for the network (e.g., "mainnet01").
  url?: string | string[] // Optional: The network endpoint URL, or a list of URLs if multiple nodes are available.
}
```

According to the JSON-RPC 2.0 specification, the `result` member is required on success. In this case, the `result` object will contain the `NetworkInfo`.

### Error Responses

In case of failure, the wallet **MUST** return an error according to the [JSON-RPC 2.0 specification](https://www.jsonrpc.org/specification#error_object):

```typescript
interface ErrorResponse {
  id: number
  jsonrpc: '2.0'
  error: {
    code: number
    message: string
    data?: object
  }
}
```

#### Error Types

| Code   | Message               |
| ------ | --------------------- |
| -32603 | Internal server error |

_Additional error codes (e.g., for an unsupported network) MAY be defined by individual implementations._

### Behavior Requirements

1. **Network Update:**

   - **MUST** validate the provided `networkId` against the wallet’s supported networks.
   - **MUST** update the wallet configuration to use the specified network.
   - **MUST** return the updated network details in the response.

2. **Data Accuracy:**

   - **MUST** ensure that the returned `NetworkInfo` accurately reflects the wallet’s active configuration.

3. **Security Considerations:**
   - **MUST** securely update internal configuration without exposing sensitive data.
   - **MUST** verify that the network change request originates from an authorized dApp session.

## Examples

### Request

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "kadena_changeNetwork_v1",
  "params": {
    "networkId": "mainnet01"
  }
}
```

### Success Response (Single Node)

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "result": {
    "name": "Mainnet",
    "networkId": "mainnet01",
    "url": "https://api.chainweb.com"
  }
}
```

### Success Response (Multiple Nodes)

```json
{
  "id": 2,
  "jsonrpc": "2.0",
  "result": {
    "name": "Mainnet",
    "networkId": "mainnet01",
    "url": ["https://api.chainweb.com", "https://api.xxx.com"]
  }
}
```

### Error Response Example

```json
{
  "id": 3,
  "jsonrpc": "2.0",
  "error": {
    "code": -32603,
    "message": "Internal server error"
  }
}
```

## Backwards Compatibility

- **Legacy Methods:** Wallets **MAY** continue to support older network retrieval methods alongside `kadena_changeNetwork_v1`. Legacy methods **MUST** be documented as deprecated and phased out over time.

- **Configuration Consistency:** Implementations **MUST** ensure that the returned network information matches the wallet’s updated configuration.

## Security Considerations

- **Data Accuracy:** Ensure that the updated network information is accurate, verified, and reflects the wallet’s active configuration.

- **Configuration Integrity:** Securely update internal configurations to prevent unauthorized network changes or configuration tampering.
