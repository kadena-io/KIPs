---
KIP: '0042'
Title: kadena_disconnect_v1 API
Author: Danillo Felixdaal and Bart Huijgen
Status: Draft
Type: Standard
Category: Interface
Created: 2025-02-17
---

# kadena_disconnect_v1 API

## Abstract

This KIP standardizes the `kadena_disconnect_v1` method for terminating connections between decentralized applications (dApps) and Kadena wallets. The method securely ends active sessions, revokes permissions, and clears cached session data, ensuring a predictable and secure disconnection process.

## Motivation

A consistent disconnection method is crucial to protect user data and prevent unauthorized access after a session ends. By standardizing `kadena_disconnect_v1`, we aim to:

- Revoke active sessions and clear cached credentials.
- Ensure that no stale session data remains post-disconnection.
- Provide a uniform interface for disconnecting across wallet implementations.
- Enhance overall security and user experience.

## Specification

### Method Definition

**Method Name:** `kadena_disconnect_v1`

### Response

The method returns an empty JSON object on success.  
This is represented by the following type:

```typescript
interface DisconnectResponse {}
```

According to the JSON-RPC 2.0 specification, a result member **MUST** be included on success. In this case, the result is an empty object.

### Error Responses

In case of failure, the wallet **MUST** return an error according to the [JSON-RPC 2.0 specification](https://www.jsonrpc.org/specification#error_object):

```typescript
interface ErrorResponse {
  id: number
  jsonrpc: '2.0'
  error: {
    code: number
    message: string
    data?: object
  }
}
```

#### Error Types

| Code   | Message               |
| ------ | --------------------- |
| -32603 | Internal server error |

## Behavior Requirements

1. **Session Termination:**

   - **MUST** revoke any active session and clear all cached credentials or tokens.
   - **MUST** ensure that the wallet no longer considers any account as connected after disconnection.

2. **Security Considerations:**
   - **MUST** securely clear all session-related data from memory to prevent unauthorized access.
   - **MUST** verify the origin of disconnection requests to avoid malicious terminations.

## Examples

### Basic Disconnect Request

#### Request

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "kadena_disconnect_v1"
}
```

#### Success Response

An empty JSON object is returned to indicate that the disconnection was successful.

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "result": {}
}
```

### Error Response Example

#### Error Response

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "error": {
    "code": -32603,
    "message": "Internal server error"
  }
}
```

## Backwards Compatibility

- **Legacy Methods:** Wallets **MAY** support older disconnect methods alongside `kadena_disconnect_v1`. Legacy methods **MUST** be documented as deprecated and phased out over time.
- **Session Cleanup:** All active sessions **MUST** be cleared following a successful disconnection.

## Security Considerations

- **Data Clearance:** Ensure that session tokens or credentials are securely removed from memory post-disconnection.
