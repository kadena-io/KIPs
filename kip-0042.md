---
KIP: '0042'
Title: kadena_disconnect API
Author: Danillo Felixdaal and Bart Huijgen
Status: Draft
Type: Standard
Category: Interface
Created: 2025-02-17
---

# kadena_disconnect API

## Abstract

This KIP standardizes the `kadena_disconnect` method for terminating connections between decentralized applications (dApps) and Kadena wallets. The method securely ends active sessions, revokes permissions, and clears cached session data, ensuring a predictable and secure disconnection process.

## Motivation

A consistent disconnection method is crucial to protect user data and prevent unauthorized access after a session ends. By standardizing `kadena_disconnect`, we aim to:

- Revoke active sessions and clear cached credentials.
- Ensure that no stale session data remains post-disconnection.
- Provide a uniform interface for disconnecting across wallet implementations.
- Enhance overall security and user experience.

## Specification

### Method Definition

**Method Name:** `kadena_disconnect`

### Request Parameters

````typescript
interface DisconnectRequest {
  networkId?: string;
}

Response

The method returns a void type, indicating that the disconnection was successful:

```typescript
type DisconnectResponse = void;
````

Error Responses

If the disconnection fails, the wallet MUST return an error in the following structure:

```typescript
{
  "error": {
    "type": "disconnectFailed | networkUnsupported | other",
    "msg": string | null
  }
}
```

Behavior Requirements

1. Session Termination:
   • MUST revoke any active session and clear all cached credentials or tokens.
   • MUST ensure the wallet no longer considers the account as connected after disconnection.

2. Network Handling:
   • MUST disconnect the session corresponding to the network.

3. Event Emission:
   • SHOULD emit a kadena_accountChanged event (with a null or empty account) to notify listeners of the disconnection.
   • OPTIONALLY, a distinct kadena_disconnect event may also be emitted.

4. Security Considerations:
   • MUST securely clear all session-related data from memory to prevent unauthorized access.
   • MUST verify the origin of disconnection requests to avoid malicious terminations.

# Examples

## Basic Disconnect Request

### Request

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "kadena_disconnect",
  "params": {
    "networkId": "mainnet01"
  }
}
```

### Success Response

An empty response (or null) indicates that the disconnection was successful.

```json
null
```

## Error Response Example

### Error Response

```json
{
  "error": {
    "type": "disconnectFailed",
    "msg": "Failed to disconnect due to network error."
  }
}
```

Backwards Compatibility
• Legacy Methods: Wallets MAY support older disconnect methods alongside kadena_disconnect. Legacy methods MUST be documented as deprecated and phased out over time.
• Session Cleanup: All active sessions MUST be cleared following a successful disconnection.

Security Considerations
• Data Clearance: Ensure that session tokens or credentials are securely removed from memory post-disconnection.
• Event Notification: Emit clear events to notify dApps of the disconnection, minimizing the risk of stale session data.
