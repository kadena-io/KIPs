---
KIP: '0038'
Title: kadena_getAccount API
Author: Danillo Felixdaal and Bart Huijgen
Status: Draft
Type: Standard
Category: Interface
Created: 2025-02-17
---

# kadena_getAccount API

## Abstract

This KIP standardizes the `kadena_getAccount` method for retrieving the active account information from a Kadena wallet. The method provides a consistent interface for dApps to access account details, ensuring a predictable integration experience across different wallet implementations.

## Motivation

A uniform approach to obtaining account information simplifies dApp development by ensuring that account details are provided in a consistent format regardless of the wallet. Standardizing `kadena_getAccount` will:

- Provide reliable and up-to-date account information to dApps.
- Simplify integration and reduce the need for wallet-specific logic.
- Enhance the overall user experience by ensuring clear account context.

## Specification

### Method Definition

**Method Name:** `kadena_getAccount`

### Request Parameters

```typescript
interface GetAccountRequest {
  networkId: string
}
```

Response

The method returns an AccountInfo object containing the active account’s details:

```typescript
interface AccountInfo {
  accountName: string // Unique account identifier.
  fungibleContract: string // Identifier for the fungible token contract.
  chainAccounts?: Array<{
    chainId: string // Chain identifier within the network.
    guard: {
      keys: Array<{ publicKey: string }> // Array of public keys (secret keys are omitted for security).
      pred: string // Predicate defining key validation (e.g., "keys-all", "keys-any").
    }
  }>
}
```

Error Responses

If the account retrieval fails, the wallet MUST return an error in the following structure:

```typescript
{
  "error": {
    "type": "accountUnavailable | other",
    "msg": string | null
  }
}
```

Behavior Requirements

1. Account Information Retrieval:
   • MUST return accurate and current account details from the specified networkId.
   • MUST support wallets with multiple accounts and provide the active account information.

2. Event Emission:
   • SHOULD emit a kadena_accountChanged event when there is a change in the active account.

3. Error Handling:
   • MUST return a clear error if the account information cannot be retrieved due to configuration issues or if no account is active.

Examples

Basic Get Account Request

Request

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "kadena_getAccount",
  "params": {
    "networkId": "mainnet01"
  }
}
```

## Example Success response

### Success Response

```json
{
  "accountName": "k:abc123...",
  "fungibleContract": "ft:xyz456...",
  "chainAccounts": [
    {
      "chainId": "0",
      "guard": {
        "keys": [
          {
            "publicKey": "ae18efd16cbd49e9a92552a2589ac01491b486fbcbb1e3f07980f945597e2033"
          }
        ],
        "pred": "keys-all"
      }
    }
  ]
}
```

## Error Response Example

### Error Response

```json
{
  "error": {
    "type": "accountUnavailable",
    "msg": "Active account information could not be retrieved."
  }
}
```

Backwards Compatibility
• Legacy Methods: Wallets MAY support older account retrieval methods alongside kadena_getAccount. Legacy methods MUST be documented as deprecated and phased out over time.
• Configuration Consistency: Implementations MUST ensure that the returned account information reflects the wallet’s active configuration.

Security Considerations
• Data Accuracy: Ensure that the returned account details are accurate and up-to-date.
• Event Notification: Emit account change events to keep dApps updated and prevent stale account data.
